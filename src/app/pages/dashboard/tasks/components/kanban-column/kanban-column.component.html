<mat-card class="inner-kanban-column">
  <mat-card-header class="kanban-column-header">
    <div class="kanban-column-icon">
      <mat-icon>{{ icon() }}</mat-icon>
    </div>
    <mat-card-title class="kanban-column-title">{{ title() }}</mat-card-title>
  </mat-card-header>
  <mat-card-content class="kanban-column-content">
    @if (loading()) {
    <div class="kanban-spinner-container">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading...</span>
    </div>
    } @else { @for (task of tasks; track task) {
    <mat-card class="kanban-task">
      <div class="kanban-task-header">
        <mat-card-subtitle>{{ task.title }}</mat-card-subtitle>
        <button matIconButton [matMenuTriggerFor]="taskMenu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #taskMenu="matMenu">
          <button mat-menu-item (click)="openTaskDialog(task)">
            <mat-icon>edit</mat-icon>
            <span>Edit Task</span>
          </button>
          <button mat-menu-item (click)="deleteTask(task.id)">
            <mat-icon>delete</mat-icon>
            <span>Delete Task</span>
          </button>
        </mat-menu>
      </div>
      <mat-card-footer class="kanban-task-footer">
        <mat-chip-list class="kanban-task-labels">
          @for (label of task.labels; track label) {
          <div class="kanban-task-label" [style.background]="label.color">{{ label.name }}</div>
          }
        </mat-chip-list>
      </mat-card-footer>
    </mat-card>
    } }
  </mat-card-content>
  <mat-card-footer>
    <button mat-button color="primary" extended (click)="openTaskDialog(null)"><mat-icon>add</mat-icon> Add Task</button>
  </mat-card-footer>
</mat-card>
